<%- include('../views/partials/header') %>
<%- include('../views/partials/navbar') %>

<div class="container mt-4 mb-5">

  <!-- ЁЯМ╕ Title -->
  <div class="text-center mb-4">
    <h2 class="fw-bold text-danger">ЁЯФе рд╕рдореВрд╣ рд╣рдиреБрдорд╛рди рдЪрд╛рд▓реАрд╕рд╛ рдкрд╛рда рд╕рд╛рд░рд╛рдВрд╢ (рдЖрдЬ)</h2>
    <p class="text-muted">рдЖрдЬ рд╕рднреА рд╕рд╛рдзрдХреЛрдВ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдП рдЧрдП рдХреБрд▓ рдкрд╛рдареЛрдВ рдХрд╛ рд╕рд╛рд░рд╛рдВрд╢</p>
  </div>

  <!-- ЁЯМЮ Total Paath Today -->
  <div class="card shadow-sm border-0 text-center py-4 mb-4 rounded-4">
    <h4 class="fw-bold text-secondary mb-2">рдХреБрд▓ рдкрд╛рда рдЖрдЬ</h4>
    <h2 class="fw-bold text-success display-6">
      <%= totalToday %> <span class="fs-5 text-muted">рдкрд╛рда</span>
    </h2>
    <p class="text-muted mt-2">
      рдЬрдп рд╣рдиреБрдорд╛рди рдЬреНрдЮрд╛рди рдЧреБрди рд╕рд╛рдЧрд░ ЁЯЩП
    </p>
  </div>

  <!-- ЁЯСе All Members Table -->
  <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
    <div class="card-header bg-danger text-white text-center fw-bold fs-5">
      ЁЯФ╕ рдЖрдЬ рдХреЗ рд╕рднреА рд╕рд╛рдзрдХ ЁЯФ╕
    </div>

    <div class="table-responsive">
      <table class="table table-striped align-middle mb-0 text-center">
        <thead class="bg-light">
          <tr class="text-danger fw-semibold">
            <th style="width: 10%;">ЁЯПЕ рдХреНрд░рдо</th>
            <th style="width: 60%;">рд╕рд╛рдзрдХ рдирд╛рдо</th>
            <th style="width: 30%;">ЁЯУЦ рдкрд╛рда рд╕рдВрдЦреНрдпрд╛</th>
          </tr>
        </thead>
        <tbody>
          <% if (topMembers && topMembers.length > 0) { %>
            <% topMembers.forEach((m, i) => { 
                 const rank = i + 1;
                 let badgeClass = "bg-danger";
                 if (rank === 1) badgeClass = "bg-warning text-dark";
                 else if (rank === 2) badgeClass = "bg-secondary";
                 else if (rank === 3) badgeClass = "bg-bronze"; // custom brownish for 3rd
            %>
              <tr>
                <td>
                  <strong class="text-danger"><%= rank %></strong>
                </td>
                <td class="fw-semibold">
                  <%= m.saadhak[0]?.name || 'Unknown' %>
                </td>
                <td>
                  <span class="badge <%= badgeClass %> fs-6">
                    <%= m.total %>
                  </span>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="3" class="text-muted py-3">
                рдЖрдЬ рдЕрднреА рддрдХ рдХрд┐рд╕реА рдиреЗ рдкрд╛рда рджрд░реНрдЬ рдирд╣реАрдВ рдХрд┐рдпрд╛ ЁЯЩП
              </td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ЁЯкФ Action Buttons -->
  <div class="text-center mt-4">
    <a href="/paath/add" class="btn btn-danger rounded-pill px-4 py-2 fw-bold me-2">
      тЮХ рдирдпрд╛ рдкрд╛рда рдЬреЛрдбрд╝реЗрдВ
    </a>
    <a href="/paath/list" class="btn btn-outline-danger rounded-pill px-4 py-2 fw-bold">
      ЁЯУЬ рдореЗрд░рд╛ рдЗрддрд┐рд╣рд╛рд╕ рджреЗрдЦреЗрдВ
    </a>
  </div>
</div>

<%- include('../views/partials/footer') %>

<style>
  .bg-bronze {
    background-color: #cd7f32;
    color: white;
  }
</style>
