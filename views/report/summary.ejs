<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<div class="container mt-4">
  <h3 class="mb-4 text-center">Team Summary Report</h3>

  <% for (let zila in summary) { 
       const ksheters = Object.keys(summary[zila]);
  %>
  <div class="mb-4">
    <h5 class="text-dark fw-bold border-bottom pb-1"><%= zila %></h5>

    <% ksheters.forEach((ksheter, index) => { 
         const isLast = index === ksheters.length - 1;
    %>
    <div class="mb-3 ms-3">
      <h6 class="text-dark fw-bold border-bottom pb-1"><%= ksheter %></h6>

      <table class="table table-bordered table-sm ms-4 mt-2">
        <thead class="table-light">
          <tr>
            <th style="width: 40%">Kender Name</th>
            <th style="width: 20%">Saadhaks</th>
            <th style="width: 20%">Shikshaks</th>
            <th style="width: 20%">Karyakartas</th>
          </tr>
        </thead>
        <tbody>
          <% for (let kender in summary[zila][ksheter]) {
               const team = summary[zila][ksheter][kender]; %>
          <tr>
            <td><%= kender %></td>
            <td><%= team.Saadhak || 0 %></td>
            <td><%= team.Shikshak || 0 %></td>
            <td><%= team.Karyakarta || 0 %></td>
          </tr>
          <% } %>
          <tr class="table-warning fw-bold">
            <td>Total</td>
            <td><%= ksheterTotals[zila][ksheter].Saadhak %></td>
            <td><%= ksheterTotals[zila][ksheter].Shikshak %></td>
            <td><%= ksheterTotals[zila][ksheter].Karyakarta %></td>
          </tr>

          <% if (isLast) { %>
          <tr class="table-primary fw-bold">
            <td>Zila Total</td>
            <td><%= zilaTotals[zila].Saadhak %></td>
            <td><%= zilaTotals[zila].Shikshak %></td>
            <td><%= zilaTotals[zila].Karyakarta %></td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
    <% }); %>
  </div>
  <% } %>
</div>

<%- include('../partials/footer') %>
