<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<div class="container my-5">
  <div class="bg-white p-4 rounded shadow-sm border">
    <h4 class="mb-4 fw-bold text-primary">
      üïµÔ∏è‚Äç‚ôÇÔ∏è Non-Attendance Report
    </h4>

    <form method="POST" action="/attendance/missing/report" class="row g-4" id="missingReportForm">

      <div class="col-md-3">
        <label class="form-label fw-semibold">From Date</label>
        <input type="date" name="from" class="form-control form-control-sm border-primary" required value="<%= defaultFrom %>">
      </div>

      <div class="col-md-3">
        <label class="form-label fw-semibold">To Date</label>
        <input type="date" name="to" class="form-control form-control-sm border-primary" required value="<%= defaultTo %>">
      </div>

      <%- include('../partials/scope-dropdowns') %>

      <!-- Hidden inputs to ensure dropdown values submit -->
      <input type="hidden" name="zila">
      <input type="hidden" name="ksheter">
      <input type="hidden" name="kender">

      <div class="col-12 text-end mt-3">
        <button type="submit" class="btn btn-success px-4 fw-bold">
          üìä Get Report
        </button>
      </div>
    </form>
  </div>
</div>

<script src="/js/scope-dropdowns.js"></script>

<script>
  // Ensure dropdown selections populate hidden inputs before submit
  const missingForm = document.getElementById('missingReportForm');

  missingForm.addEventListener('submit', function () {
    document.querySelector('input[name="zila"]').value = document.getElementById('zilaDropdown').value || '';
    document.querySelector('input[name="ksheter"]').value = document.getElementById('ksheterDropdown').value || '';
    document.querySelector('input[name="kender"]').value = document.getElementById('kenderDropdown').value || '';
  });
</script>

<%- include('../partials/footer') %>
